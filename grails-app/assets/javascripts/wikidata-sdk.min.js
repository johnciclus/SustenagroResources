!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.wdk=e()}}(function(){return function e(i,t,n){function r(s,a){if(!t[s]){if(!i[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};i[s][0].call(c.exports,function(e){var t=i[s][1][e];return r(t?t:e)},c,c.exports,e,i,t,n)}return t[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,i,t){"use strict";function n(e,i){return Object.prototype.hasOwnProperty.call(e,i)}i.exports=function(e,i,t,o){i=i||"&",t=t||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(i);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;l>c;++c){var f,d,p,m,h=e[c].replace(a,"%20"),y=h.indexOf(t);y>=0?(f=h.substr(0,y),d=h.substr(y+1)):(f=h,d=""),p=decodeURIComponent(f),m=decodeURIComponent(d),n(s,p)?r(s[p])?s[p].push(m):s[p]=[s[p],m]:s[p]=m}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],2:[function(e,i,t){"use strict";function n(e,i){if(e.map)return e.map(i);for(var t=[],n=0;n<e.length;n++)t.push(i(e[n],n));return t}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};i.exports=function(e,i,t,a){return i=i||"&",t=t||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(r(s))+t;return o(e[s])?n(e[s],function(e){return a+encodeURIComponent(r(e))}).join(i):a+encodeURIComponent(r(e[s]))}).join(i):a?encodeURIComponent(r(a))+t+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var i=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i}},{}],3:[function(e,i,t){"use strict";t.decode=t.parse=e("./decode"),t.encode=t.stringify=e("./encode")},{"./decode":1,"./encode":2}],4:[function(e,i,t){(function(){var t,n;n=e("./wikidata_time_to_date_object"),t={},t.isNumericId=function(e){return/^[0-9]+$/.test(e)},t.isWikidataId=function(e){return/^(Q|P)[0-9]+$/.test(e)},t.isWikidataEntityId=function(e){return/^Q[0-9]+$/.test(e)},t.isWikidataPropertyId=function(e){return/^P[0-9]+$/.test(e)},t.normalizeId=function(e,i,n){if(null==n&&(n="Q"),t.isNumericId(e))return i?e:""+n+e;if(t.isWikidataId(e))return i?e.slice(1):e;throw new Error("invalid id")},t.getNumericId=function(e){if(!t.isWikidataId(e))throw new Error("invalid wikidata id: "+e);return e.replace(/Q|P/,"")},t.normalizeIds=function(e,i,n){return null==n&&(n="Q"),e.map(function(e){return t.normalizeId(e,i,n)})},t.wikidataTimeToDateObject=n,t.wikidataTimeToEpochTime=function(e){return n(e).getTime()},t.wikidataTimeToISOString=function(e){return n(e).toISOString()},t.normalizeWikidataTime=t.wikidataTimeToEpochTime,i.exports=t}).call(this)},{"./wikidata_time_to_date_object":7}],5:[function(e,i,t){(function(){var t,n;n=e("./helpers"),t=e("./simplify_claims"),i.exports={wd:{entities:function(e){var i,n,r;e=e.body||e,i=e.entities;for(r in i)n=i[r],n.claims=t(n.claims);return i}},wdq:{entities:function(e){var i;return e=e.body||e,null!=(i=e.items)?i.map(function(e){return n.normalizeId(e)}):void 0}}}}).call(this)},{"./helpers":4,"./simplify_claims":6}],6:[function(e,i,t){(function(){var t,n,r,o,s;s=e("./helpers"),r=function(e){var i,t,n;n={};for(i in e)t=e[i],n[i]=o(t);return n},o=function(e){return e.map(n).filter(t)},t=function(e){return null!=e},n=function(e){var i,t,n;if(n=e.mainsnak,null==n)return null;if(i=n.datatype,t=n.datavalue,null==t)return null;switch(i){case"string":case"commonsMedia":case"url":case"external-id":return t.value;case"monolingualtext":return t.value.text;case"wikibase-item":return"Q"+t.value["numeric-id"];case"time":return s.normalizeWikidataTime(t.value.time);default:return null}},i.exports={simplifyClaims:r,simplifyPropertyClaims:o,simplifyClaim:n}}).call(this)},{"./helpers":4}],7:[function(e,i,t){(function(){var e,t,n,r;i.exports=function(i){var t,r,o;return o=i[0],r=i.slice(1),t=e(o,r),"Invalid Date"===t.toString()?n(o,r):t},e=function(e,i){return"-"===e?t(i):r(i)},r=function(e){return new Date(e)},t=function(e){var i;return i="-00"+e,new Date(i)},n=function(i,t){var n,r,o,s;return o=t.split("T")[0].split("-"),s=o[0],r=o[1],n=o[2],e(i,s)}}).call(this)},{}],8:[function(e,i,t){(function(){var t,n,r,o,s,a;t=e("../utils/build_url"),s=e("../utils/utils"),r=s.isPlainObject,n=s.forceArray,a=s.shortLang,i.exports=function(e,i,s,u,l){var c,f;if(r(e)&&(f=e,e=f.titles,i=f.sites,s=f.languages,u=f.props,l=f.format),l||(l="json"),null==e||0===e.length)throw new Error("no title provided");return(null==i||0===i.length)&&(i=["enwiki"]),e=n(e),i=n(i).map(o),u=n(u),c={action:"wbgetentities",titles:e.join("|"),sites:i.join("|"),format:l},null!=s&&(s=n(s).map(a),c.languages=s.join("|")),(null!=u?u.length:void 0)>0&&(c.props=u.join("|")),t("wikidata",c)},o=function(e){return 2===e.length?e+"wiki":e}}).call(this)},{"../utils/build_url":13,"../utils/utils":15}],9:[function(e,i,t){(function(){var t,n,r;t=e("../utils/build_url"),n=e("../helpers/helpers"),r={claim:function(e,i){return e=n.normalizeId(e,!0),i=n.normalizeId(i,!0),t("wdq",{q:"CLAIM["+e+":"+i+"]"})},string:function(e,i){return e=n.normalizeId(e,!0),t("wdq",{q:"STRING["+e+":"+i+"]"})}},i.exports=function(e,i){return n.isWikidataEntityId(i)?r.claim(e,i):r.string(e,i)}}).call(this)},{"../helpers/helpers":4,"../utils/build_url":13}],10:[function(e,i,t){(function(){var t,n,r,o,s,a;a=e("../helpers/helpers"),t=e("../utils/build_url"),o=e("../utils/utils"),r=o.isPlainObject,n=o.forceArray,s=o.shortLang,i.exports=function(e,i,o,u){var l,c;if(r(e)&&(c=e,e=c.ids,i=c.languages,o=c.props,u=c.format),u||(u="json"),null==e&&0!==e.length)throw new Error("no id provided");return e=a.normalizeIds(n(e)),o=n(o),l={action:"wbgetentities",ids:e.join("|"),format:u},null!=i&&(i=n(i).map(s),l.languages=i.join("|")),(null!=o?o.length:void 0)>0&&(l.props=o.join("|")),t("wikidata",l)}}).call(this)},{"../helpers/helpers":4,"../utils/build_url":13,"../utils/utils":15}],11:[function(e,i,t){(function(){var t,n,r;r=e("../helpers/helpers"),t=e("../utils/build_url"),n=e("../utils/utils").isPlainObject,i.exports=function(e,i,r,o,s){var a;if(n(e)&&(a=e,e=a.search,i=a.language,r=a.limit,o=a.format,s=a.uselang),!((null!=e?e.length:void 0)>0))throw new Error("search can't be empty");return i||(i="en"),s||(s=i),r||(r="20"),o||(o="json"),t("wikidata",{action:"wbsearchentities",search:e,language:i,limit:r,format:o,uselang:s})}}).call(this)},{"../helpers/helpers":4,"../utils/build_url":13,"../utils/utils":15}],12:[function(e,i,t){(function(){i.exports=function(e){var i;return i=encodeURIComponent(e),"https://query.wikidata.org/sparql?format=json&query="+i}}).call(this)},{}],13:[function(e,i,t){(function(){var t,n,r;try{n=e("querystring")}catch(o){t=o,n=e("./querystring_lite")}r={wikidata:"https://www.wikidata.org/w/api.php",commons:"http://commons.wikimedia.org",wdq:"http://wdq.wmflabs.org/api"},i.exports=function(e,i){return r[e]+"?"+n.stringify(i)}}).call(this)},{"./querystring_lite":14,querystring:3}],14:[function(e,i,t){(function(){i.exports={stringify:function(e){var i,t,n;t="";for(i in e)n=e[i],null!=n&&(t+="&"+i+"="+n);return t=t.slice(1),"undefined"!=typeof encodeURI&&null!==encodeURI?encodeURI(t):t}}}).call(this)},{}],15:[function(e,i,t){(function(){i.exports={shortLang:function(e){return e.slice(0,3)},forceArray:function(e){return"string"==typeof e&&(e=[e]),e||[]},isPlainObject:function(e){return null==e?!1:"object"!=typeof e?!1:e instanceof Array?!1:!0}}}).call(this)},{}],16:[function(e,i,t){(function(){var t,n,r,o,s,a,u,l;i.exports=l={},t=e("./helpers/helpers"),l.searchEntities=e("./queries/wikidata_search_entities"),l.getEntities=e("./queries/wikidata_get_entities"),l.getWikidataIdsFromSitelinks=e("./queries/get_wikidata_ids_from_sitelinks"),l.sparqlQuery=e("./queries/wikidata_sparql_query"),l.getReverseClaims=e("./queries/wdq_get_reverse_claims"),l.parse=e("./helpers/parse_responses"),r=e("./helpers/simplify_claims"),o=r.simplifyClaim,a=r.simplifyPropertyClaims,s=r.simplifyClaims,l.simplifyClaim=o,l.simplifyPropertyClaims=a,l.simplifyClaims=s,l.getWikidataIdsFromWikipediaTitles=l.getWikidataIdsFromSitelinks,l.helpers=t;for(n in t)u=t[n],l[n]=u}).call(this)},{"./helpers/helpers":4,"./helpers/parse_responses":5,"./helpers/simplify_claims":6,"./queries/get_wikidata_ids_from_sitelinks":8,"./queries/wdq_get_reverse_claims":9,"./queries/wikidata_get_entities":10,"./queries/wikidata_search_entities":11,"./queries/wikidata_sparql_query":12}]},{},[16])(16)});
